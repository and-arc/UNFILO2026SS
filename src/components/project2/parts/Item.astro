---
// 商品ラインナップの内容部分のみを出力する軽量コンポーネント
// サーバーサイドでのみ実行され、クライアントサイドJavaScriptは生成されない
// @ts-nocheck
import { getProductsByName, formatPrice, getSizeClass } from '../../../utils/productUtils.js';
import projectData from '../../../spec/project1.json';

export interface Props {
  themeId: number;
  productNames?: string | string[];
}

const { themeId, productNames } = Astro.props;

// ビルド時に商品情報を静的に解決（ランタイム処理なし）
const groupedItems = getProductsByName(projectData, themeId, productNames);
---

{Object.entries(groupedItems).map(([itemName, items]) => (
  <div class="item_box">
    <h4 class="item_title">{itemName}</h4>
    <ul class="item_priceList">
      {(items as any[]).map((item: any) => (
        <li class={`item_price ${getSizeClass(item.size)}`}>
          <span class="item_priceText">{formatPrice(item.price)}<span class="tax">(税込)</span></span>
          <a href={item.link} class="item_btn" target="_blank" rel="noopener">詳細</a>
        </li>
      ))}
    </ul>
  </div>
))}
